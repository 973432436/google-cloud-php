{"id":"spanner\/batch\/batchsnapshot","type":"","title":"Google\\Cloud\\Spanner\\Batch\\BatchSnapshot","name":"BatchSnapshot","description":"<p>Represents a Read-Only Batch Transaction in Cloud Spanner.<\/p>\n<p>Batch Snapshots can be shared with other servers or processes by casting the\nobject to a string, or by calling <a data-custom-type=\"panner\/batch\/batchsnapshot\" data-method=\"serialize\">Google\\Cloud\\Spanner\\Batch\\BatchSnapshot::serialize()<\/a>.<\/p>\n<p>Please note that it is important that Snapshots are closed when they are no\nlonger needed. Closing a snapshot is accomplished by calling\n<a data-custom-type=\"panner\/batch\/batchsnapshot\" data-method=\"close\">Google\\Cloud\\Spanner\\Batch\\BatchSnapshot::close()<\/a>. Snapshots should be\nclosed only after all workers have finished processing. Closing a snapshot\nbefore all workers have processed will result in call failures.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Spanner\\SpannerClient;\n\n$spanner = new SpannerClient();\n$batch = $spanner->batch('instance-id', 'database-id');\n$snapshot = $batch->snapshot();"},{"caption":"<p>Serialize a snapshot to share it with another worker.<\/p>","code":"$snapshotString = (string) $snapshot;"},{"caption":"<p>Calling BatchSnapshot::serialize() has the same effect.<\/p>","code":"$snapshotString = $snapshot->serialize();"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"Spanner\/src\/Batch\/BatchSnapshot.php#L73","description":"","examples":[],"resources":[],"params":[{"name":"operation","description":"<p>The Operation instance.<\/p>","types":["<a data-custom-type=\"panner\/operation\">Google\\Cloud\\Spanner\\Operation<\/a>"],"optional":false,"nullable":null},{"name":"session","description":"<p>The session to use for spanner interactions.<\/p>","types":["<a data-custom-type=\"panner\/session\/session\">Google\\Cloud\\Spanner\\Session\\Session<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.id","description":"<p>The Transaction ID.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.readTimestamp","description":"<p>The read timestamp.<\/p>","types":["<a data-custom-type=\"panner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[]},{"id":"close","type":"instance","name":"close","source":"Spanner\/src\/Batch\/BatchSnapshot.php#L95","description":"<p>Closes all open resources.<\/p>\n<p>When the snapshot is no longer needed, it is important to call this method\nto free up resources allocated by the Batch Client.<\/p>\n<p>Methods on this instance which make service calls will fail if the snapshot\nhas been closed.<\/p>","examples":[{"caption":"","code":"$snapshot->close();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"partitionRead","type":"instance","name":"partitionRead","source":"Spanner\/src\/Batch\/BatchSnapshot.php#L131","description":"<p>Begin a partitioned read.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Spanner\\KeySet;\n\n$keySet = new KeySet(['all' => true]);\n$columns = ['id', 'firstName', 'lastName'];\n$partitions = $snapshot->partitionRead('Users', $keySet, $columns);"}],"resources":[],"params":[{"name":"table","description":"<p>The table name.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"keySet","description":"<p>The KeySet to select rows.<\/p>","types":["<a data-custom-type=\"panner\/keyset\">Google\\Cloud\\Spanner\\KeySet<\/a>"],"optional":false,"nullable":null},{"name":"columns","description":"<p>A list of column names to return.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options.maxPartitions","description":"<p>The desired maximum number of partitions to return. For example, this may be set to the number of workers available. The maximum value is currently 200,000. This is only a hint. The actual number of partitions returned may not always match the requested value. <strong>Defaults to<\/strong> <code>10000<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.partitionSizeBytes","description":"<p>The desired data size for each partition generated. This is only a hint. The actual size of each partition may be smaller or larger than this size request. <strong>Defaults to<\/strong> <code>1000000000<\/code> (i.e. 1 GiB).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.index","description":"<p>The name of an index on the table.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"panner\/batch\/readpartition\">Google\\Cloud\\Spanner\\Batch\\ReadPartition[]<\/a>"],"description":""}]},{"id":"partitionQuery","type":"instance","name":"partitionQuery","source":"Spanner\/src\/Batch\/BatchSnapshot.php#L191","description":"<p>Begin a partitioned SQL query.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Spanner\\Timestamp;\n\n$queryString = 'SELECT * FROM Users WHERE joinDate < @joinDate AND lastLogin > @loginCutoff';\n$partitions = $snapshot->partitionQuery($queryString, [\n    'parameters' => [\n        'joinDate' => new Timestamp(new \\DateTime('2017-01-01')),\n        'loginDate' => new Timestamp(new \\DateTime('2017-12-31'))\n    ]\n]);"}],"resources":[],"params":[{"name":"sql","description":"<p>The query string to execute.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options.maxPartitions","description":"<p>The desired maximum number of partitions to return. For example, this may be set to the number of workers available. The maximum value is currently 200,000. This is only a hint. The actual number of partitions returned may not always match the requested value. <strong>Defaults to<\/strong> <code>10000<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.partitionSizeBytes","description":"<p>The desired data size for each partition generated. This is only a hint. The actual size of each partition may be smaller or larger than this size request. <strong>Defaults to<\/strong> <code>1000000000<\/code> (i.e. 1 GiB).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.parameters","description":"<p>A key\/value array of Query Parameters, where the key is represented in the query string prefixed by a <code>@<\/code> symbol.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.types","description":"<p>A key\/value array of Query Parameter types. Generally, Google Cloud PHP can infer types. Explicit type definitions are only necessary for null parameter values. Accepted values are defined as constants on <a data-custom-type=\"panner\/valuemapper\">Google\\Cloud\\Spanner\\ValueMapper<\/a>, and are as follows: <code>Database::TYPE_BOOL<\/code>, <code>Database::TYPE_INT64<\/code>, <code>Database::TYPE_FLOAT64<\/code>, <code>Database::TYPE_TIMESTAMP<\/code>, <code>Database::TYPE_DATE<\/code>, <code>Database::TYPE_STRING<\/code>, <code>Database::TYPE_BYTES<\/code>, <code>Database::TYPE_ARRAY<\/code> and <code>Database::TYPE_STRUCT<\/code>. If the parameter type is an array, the type should be given as an array, where the first element is <code>Database::TYPE_ARRAY<\/code> and the second element is the array type, for instance <code>[Database::TYPE_ARRAY, Database::TYPE_INT64]<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"panner\/batch\/querypartition\">Google\\Cloud\\Spanner\\Batch\\QueryPartition[]<\/a>"],"description":""}]},{"id":"executePartition","type":"instance","name":"executePartition","source":"Spanner\/src\/Batch\/BatchSnapshot.php#L219","description":"<p>Read rows from a partition.<\/p>\n<p>Partitions are created by calling <a data-custom-type=\"panner\/batch\/batchsnapshot\" data-method=\"partitionRead\">Google\\Cloud\\Spanner\\Batch\\BatchSnapshot::partitionRead()<\/a>\nor <a data-custom-type=\"panner\/batch\/batchsnapshot\" data-method=\"partitionQuery\">Google\\Cloud\\Spanner\\Batch\\BatchSnapshot::partitionQuery()<\/a>.\nGenerally, those partitions will be distributed to worker processes, each\nof which will call this method with the partition it was given.<\/p>","examples":[{"caption":"","code":"$result = $snapshot->executePartition($partition);"}],"resources":[],"params":[{"name":"partition","description":"<p>The partition to read.<\/p>","types":["<a data-custom-type=\"panner\/batch\/partitioninterface\">Google\\Cloud\\Spanner\\Batch\\PartitionInterface<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[{"type":"\\BadMethodCallException","description":"If an invalid partition type is given."}],"returns":[{"types":["<a data-custom-type=\"panner\/result\">Google\\Cloud\\Spanner\\Result<\/a>"],"description":""}]},{"id":"serialize","type":"instance","name":"serialize","source":"Spanner\/src\/Batch\/BatchSnapshot.php#L240","description":"<p>Return a stringified representation of the BatchSnapshot object.<\/p>","examples":[{"caption":"","code":"$snapshotString = $snapshot->serialize();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"description":""}]},{"id":"readTimestamp","type":"instance","name":"readTimestamp","source":"Spanner\/src\/SnapshotTrait.php#L87","description":"<p>Retrieve the Read Timestamp.<\/p>\n<p>For snapshot read-only transactions, the read timestamp chosen for the\ntransaction.<\/p>\n\nImplemented in <a data-custom-type=\"panner\/snapshottrait\">Google\\Cloud\\Spanner\\SnapshotTrait<\/a>","examples":[{"caption":"","code":"$timestamp = $snapshot->readTimestamp();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"panner\/timestamp\">Google\\Cloud\\Spanner\\Timestamp<\/a>"],"description":""}]},{"id":"execute","type":"instance","name":"execute","source":"Spanner\/src\/TransactionalReadTrait.php#L91","description":"<p>Run a query.<\/p>\n\nImplemented in <a data-custom-type=\"panner\/transactionalreadtrait\">Google\\Cloud\\Spanner\\TransactionalReadTrait<\/a>","examples":[],"resources":[],"params":[{"name":"sql","description":"<p>The query string to execute.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.parameters","description":"<p>A key\/value array of Query Parameters, where the key is represented in the query string prefixed by a <code>@<\/code> symbol.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.types","description":"<p>A key\/value array of Query Parameter types. Generally, Google Cloud PHP can infer types. Explicit type definitions are only necessary for null parameter values. Accepted values are defined as constants on <a data-custom-type=\"panner\/valuemapper\">Google\\Cloud\\Spanner\\ValueMapper<\/a>, and are as follows: <code>Database::TYPE_BOOL<\/code>, <code>Database::TYPE_INT64<\/code>, <code>Database::TYPE_FLOAT64<\/code>, <code>Database::TYPE_TIMESTAMP<\/code>, <code>Database::TYPE_DATE<\/code>, <code>Database::TYPE_STRING<\/code>, <code>Database::TYPE_BYTES<\/code>, <code>Database::TYPE_ARRAY<\/code> and <code>Database::TYPE_STRUCT<\/code>. If the parameter type is an array, the type should be given as an array, where the first element is <code>Database::TYPE_ARRAY<\/code> and the second element is the array type, for instance <code>[Database::TYPE_ARRAY, Database::TYPE_INT64]<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"panner\/result\">Google\\Cloud\\Spanner\\Result<\/a>"],"description":""}]},{"id":"read","type":"instance","name":"read","source":"Spanner\/src\/TransactionalReadTrait.php#L120","description":"<p>Lookup rows in a table.<\/p>\n\nImplemented in <a data-custom-type=\"panner\/transactionalreadtrait\">Google\\Cloud\\Spanner\\TransactionalReadTrait<\/a>","examples":[],"resources":[],"params":[{"name":"table","description":"<p>The table name.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"keySet","description":"<p>The KeySet to select rows.<\/p>","types":["<a data-custom-type=\"panner\/keyset\">Google\\Cloud\\Spanner\\KeySet<\/a>"],"optional":false,"nullable":null},{"name":"columns","description":"<p>A list of column names to return.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.index","description":"<p>The name of an index on the table.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.limit","description":"<p>The number of results to return.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"panner\/result\">Google\\Cloud\\Spanner\\Result<\/a>"],"description":""}]},{"id":"id","type":"instance","name":"id","source":"Spanner\/src\/TransactionalReadTrait.php#L140","description":"<p>Retrieve the Transaction ID.<\/p>\n\nImplemented in <a data-custom-type=\"panner\/transactionalreadtrait\">Google\\Cloud\\Spanner\\TransactionalReadTrait<\/a>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"description":""}]},{"id":"type","type":"instance","name":"type","source":"Spanner\/src\/TransactionalReadTrait.php#L150","description":"<p>Get the Transaction Type.<\/p>\n\nImplemented in <a data-custom-type=\"panner\/transactionalreadtrait\">Google\\Cloud\\Spanner\\TransactionalReadTrait<\/a>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"description":""}]}]}