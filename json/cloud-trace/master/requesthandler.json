{"id":"trace\/requesthandler","type":"","title":"Google\\Cloud\\Trace\\RequestHandler","name":"RequestHandler","description":"<p>This class manages the logic for sampling and reporting a trace within a\nsingle request. It is not meant to be used directly -- instead, it should\nbe managed by the RequestTracer as its singleton instance.<\/p>","examples":[],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"src\/Trace\/RequestHandler.php#L85","description":"<p>Create a new RequestTracer and start tracing this request.<\/p>","examples":[],"resources":[],"params":[{"name":"reporter","description":"<p>How to report the trace at the end of the request<\/p>","types":["<a data-custom-type=\"trace\/reporter\/reporterinterface\">Google\\Cloud\\Trace\\Reporter\\ReporterInterface<\/a>"],"optional":false,"nullable":null},{"name":"sampler","description":"<p>Which sampler to use for sampling requests<\/p>","types":["<a data-custom-type=\"trace\/sampler\/samplerinterface\">Google\\Cloud\\Trace\\Sampler\\SamplerInterface<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options. See\n<a data-custom-type=\"trace\/tracespan\" data-method=\"__construct\">Google\\Cloud\\Trace\\TraceSpan::__construct()<\/a> for the other available options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.headers","description":"<p>Optional array of headers to use in place of $_SERVER<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[],"returns":[]},{"id":"onExit","type":"instance","name":"onExit","source":"src\/Trace\/RequestHandler.php#L121","description":"<p>The function registered as the shutdown function. Cleans up the trace and reports using the\nprovided ReporterInterface. Adds additional labels to the root span detected from the response.<\/p>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[]},{"id":"tracer","type":"instance","name":"tracer","source":"src\/Trace\/RequestHandler.php#L149","description":"<p>Return the tracer used for this request.<\/p>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"trace\/tracer\/tracerinterface\">Google\\Cloud\\Trace\\Tracer\\TracerInterface<\/a>"],"description":""}]},{"id":"inSpan","type":"instance","name":"inSpan","source":"src\/Trace\/RequestHandler.php#L164","description":"<p>Instrument a callable by creating a TraceSpan that manages the startTime and endTime.<\/p>\n<p>If an exception is thrown while executing the callable, the exception will be caught,\nthe span will be closed, and the exception will be re-thrown.<\/p>","examples":[],"resources":[],"params":[{"name":"spanOptions","description":"<p>Options for the span.\n<a data-custom-type=\"trace\/tracespan\" data-method=\"__construct\">Google\\Cloud\\Trace\\TraceSpan::__construct()<\/a><\/p>","types":["array"],"optional":false,"nullable":null},{"name":"callable","description":"<p>The callable to inSpan.<\/p>","types":["callable"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["mixed"],"description":"<p>Returns whatever the callable returns<\/p>"}]},{"id":"startSpan","type":"instance","name":"startSpan","source":"src\/Trace\/RequestHandler.php#L177","description":"<p>Explicitly start a new TraceSpan. You will need to manage finishing the TraceSpan,\nincluding handling any thrown exceptions.<\/p>","examples":[],"resources":[],"params":[{"name":"spanOptions","description":"<p>Options for the span.\n<a data-custom-type=\"trace\/tracespan\" data-method=\"__construct\">Google\\Cloud\\Trace\\TraceSpan::__construct()<\/a><\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"trace\/tracespan\">Google\\Cloud\\Trace\\TraceSpan<\/a>"],"description":""}]},{"id":"endSpan","type":"instance","name":"endSpan","source":"src\/Trace\/RequestHandler.php#L187","description":"<p>Explicitly finish the current context (TraceSpan).<\/p>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"trace\/tracespan\">Google\\Cloud\\Trace\\TraceSpan<\/a>"],"description":""}]},{"id":"context","type":"instance","name":"context","source":"src\/Trace\/RequestHandler.php#L197","description":"<p>Return the current context (TraceSpan)<\/p>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"trace\/tracecontext\">Google\\Cloud\\Trace\\TraceContext<\/a>"],"description":""}]}]}